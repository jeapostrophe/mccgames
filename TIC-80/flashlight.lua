-- title:  Flashlight
-- author: Balistic Ghul studios
-- desc:   ...
-- script: lua

--HOW TO
--change OVR palette to lighter, SPR palette to darker
--1.draw in tic method anything you need
--2.store what has been drawn into memory with saveScreen at the end of tic function
--3.in OVR method get pixel from memory buffer and draw into ovr with lighter color
--light simulated.. profit!

t=0
xp=2*8
yp=5*8

mx,my,lm,rm,mm,msx,msy=0

--Buffer to store 240x136 pixel from TIC
--This is needed because in OVR screen we cannot test
--what has been drawn on TIC screen
--
--another approach would be:
--clear black screen
--draw every light source into it so white will be light
--store screen as lightmask
--draw graphics normally without light
--draw ovr litghtmas so all pixel that are not black are
-- changed to ovr palette pixels and you get nice light effect
vram={}

--test of light mask, here i draw filled circle with color
--12 to simulate flashlight
lightmask={}

particles={}

--settings for animated tiles, s=speed, f=frames
--index in array = tile index
tileanimations={
 [22]={s=0.1,f=2},
	[7]={s=0.5,f=4},
	[11]={s=0.2,f=4},
}

scale=1
method=1

--precalculated light of radius 20
--lr20=createLightCircle(20)

--draw animated tiles on drawn map
function remap(tile,x,y)
 local outTile,flip,rotate=tile,0,0
	local at=tileanimations[tile]
	if at then
	 outTile=outTile+math.floor(t*at.s)%at.f
	end
	return outTile,flip,rotate
end

--here we draw as normally
function TIC()
 mx,my,lm,rm,mm,msx,msy=mouse()
	
	if btnp(0) then yp=yp-8 end
	if btnp(1) then yp=yp+8 end
	if btnp(2) then xp=xp-8 end
	if btnp(3) then xp=xp+8 end

 --draw lights on black screen
	cls(0)
	--circ(mx,my,20,12)
	torch(8,4)
	torch(2,10)
	torch(15,10)
	torch(22,7)
	torch(26,9)
	light(xp+4,yp+4,10)
	saveScreen(lightmask)
	
 --draw whatever you desire
	cls(0)
	--spr(1+t%60//30*2,xp,yp,14,3,0,0,2,2)
	--spr(33,5,11,-1,3,0,0,2,2)
	--print("Let there be LIGHT!",64,84,2)
	--map(0,0,30,17,0,0,-1,1,remap)
	map(0,0,30,17,0,0,-1,scale,remap)
	spr(32,xp,yp,5)
	t=t+1

 --save all pixels into memory
	saveScreen(vram)
	
	--toggle light drawing method
	if keyp(26) then
	 if method==1 then
		 method=2
		else
		 method=1
		end
	end
end

--this will help to simulate light
function OVR()
 --print("SCN palette 16colors",5,5,12,true,1,true)
 --print("OVR palette +16color = 32 total",5,44,12,true,1,true)
	--print("SCN sprite",xp,yp-6,12,true,1,true)
	--print("<- SCN text",170,84,12)
 --spr(33,5,50,-1,3,0,0,2,2)
	
	if method==1 then
	--paint ligthmask over screen
	for j=0,135 do
	 for i=0,239 do
		 --check if lightmask has light on pixel
		 if bpix(lightmask,i,j)==12 then
			 --pix(i,j,12)
			 c=bpix(vram,i,j)
				if c~=0 then
	 			--draw that pixel with OVR palette
		 		pix(i,j,c)
				end
			end
		end
	end
	else

 --paint whatever mask you need here
	local c
	local s=30
	for j=my,my+s do
	 for i=mx,mx+s do
		 --get pixel from stored screen
		 c=bpix(vram,i,j)
			if c~=0 then
 			--draw that pixel with OVR palette
	 		pix(i,j,c)
			end
		end
	end
	
	--this is just to see boundaries of my rectangle mask
	--print("Inside circle is light area affecting SCN pixels",mx-15,my-26,12,true,1,true)
	--rectb(mx,my,s,s,12)
	--circb(mx,my,20,12)
	
 	--drawScreen(lightmask)
 	--createLightCircle(20)
	 drawLightCircle(mx,my,lr20)
	end
	
	print("press Z to toggle light drawing method",2,2,12,false,1,true)
	if method==1 then
	 print("i am now drawing light through OVR screen and OVR palette",2,10,12,false,1,true)
	else
	 print("light drawn on mouse position with precalculated shadow palette",2,10,12,false,1,true)
	end
end

--store screen into memory as pixel array
function saveScreen(b)
 local i=0
	for y=0,135 do
	 for x=0,239 do
		 b[i]=pix(x,y)
			i=i+1
		end
	end
end

--draw stored screen
function drawScreen(b)
 local i=0
	for y=0,135 do
	 for x=0,239 do
		 pix(x,y,b[i])
			i=i+1
		end
	end
end

--get stored pixel from memory
function bpix(b,x,y)
 if x<0 or y<0 or x>239 or y>135 then return 0 end
	return b[x+y*240]
end

--add torch from map coordinates
function torch(mx,my)
	light(mx*8*scale+4*scale,my*8*scale+4*scale,20*scale)
end

--add light for pixel coordinates
function light(x,y,r)
 circ(x,y,r+math.random(5),12)
end

-- get spritesheet pixel
function sget(x,y)
 local addr=0x4000+(x//8+y//8*16)*32 
 return peek4(addr*2+x%8+y%8*8) 
end

function readPalette()
 --first 8 colors and 4 levels of intensity
	local s={}
	local idx=0
 for j=32,40 do
	 s[idx]={}
	 for i=0,3 do
		 local c=sget(i,j)
			s[idx][i]=c
		end
		idx=idx+1
	end
	--next 8 colors and 4 levels of intensity
	for j=32,40 do
	 s[idx]={}
	 for i=4,7 do
		 local c=sget(i,j)
			s[idx][i-4]=c
		end
		idx=idx+1
	end
	return s
end

shadowpal=readPalette()

--create data structure that defines a light circle with 
--various levels of light intensity
function createLightCircle(r)
 local a={}
	a.r=r
	a.d={}
 local l1=r
	local l2=r-3
	local l3=r-6
	local l4=r-9
 for j=0,r do
	 a.d[j]={}
	 for i=0,r do
		 local d=math.sqrt(i*i+j*j)
			local c=0
			if d<l4 then
			 c=12
			elseif d<l3 then
			 c=13
			elseif d<l2 then
			 c=14
			elseif d<l1 then
			 c=15
			end
			--pix(i,j,c)
			a.d[j][i]=c
		end
	end
	return a
end

lr20=createLightCircle(20)

--draw defined light circle mask
function drawLightCircle(x,y,lc)
 local x1=x-lc.r
	local y1=y-lc.r
	local x2=x+lc.r+1
	local y2=y+lc.r+1
	rect(0,0,x1,136,0)
	rect(x1,0,x2-x1,y1,0)
	rect(x1,y2,x2-x1,136-y2,0)
	rect(x2,0,240-x2,136,0)
	
 for j=0,lc.r do
	 for i=0,lc.r do
		 local c=lc.d[j][i]
			--just testing, 12 is minimum color so i need a level
			--of 0..3
			c=c-12
			drawLightPixel(x+i,y+j,c)
			drawLightPixel(x-i,y+j,c)
			drawLightPixel(x+i,y-j,c)
			drawLightPixel(x-i,y-j,c)
		end
	end
end

function drawLightPixel(x,y,intensity)
 local p=bpix(vram,x,y)
	local c=shadowpal[p][intensity]
	pix(x,y,c)
end

--add particle emitter
function emitter(x,y,dx)

end

--add particle
function particle(x,y,dx,dy,color,life)

end

-- <TILES>
-- 001:eccccccccc888888caaaaaaaca888888cacccccccacc0ccccacc0ccccacc0ccc
-- 002:ccccceee8888cceeaaaa0cee888a0ceeccca0ccc0cca0c0c0cca0c0c0cca0c0c
-- 003:eccccccccc888888caaaaaaaca888888cacccccccacccccccacccccccac000c0
-- 004:ccccceee8888cceeaaaa0cee888a0ceeccca0cccccca0cc0ccca0cc000ca0c0c
-- 005:2333333312222223122222231222222312222223122222231222222311111112
-- 006:2333233312231223122312231112111223332333122312231223122311121112
-- 007:0000000000040000004c400000043400003cc3000d4c34d00feeeef000ffff00
-- 008:00300000032300000030000000003400000323000d4334d00feeeef000ffff00
-- 009:000000000020040000004c40000c3400002c22000d4234d00feeeef000ffff00
-- 010:000000000010c0000002c200003c3000000430000d4333d00feeeef000ffff00
-- 011:aa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99cc
-- 012:cc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aa
-- 013:aa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99cc
-- 014:cc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aa
-- 017:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 018:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 019:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 020:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 021:9999999999999999999999999999999999999999999999999999999999999999
-- 022:0000000099009900999999999999999999999999999999999999999999999999
-- 023:0000000088998899999999999999999999999999999999999999999999999999
-- 024:000000000c000c000a0c0a0c0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a
-- 025:00000000aaaaaac000000000aaaaac0000000000aaaaaac000000000aaaaac00
-- 026:000000000caaaaaa0000000000caaaaa000000000caaaaaa0000000000caaaaa
-- 032:5000000500444400049949400498484000444400020220200020020050055005
-- 033:111222331112223311122233888bbbcc888bbbcc888bbbcc999aaadd999aaadd
-- 034:344455503444555034445550c0006660c0006660c0006660deee7770deee7770
-- 035:13331333f113f113f113f113fff1fff112221333f112f113f112f113fff1fff1
-- 037:6555606505050660060056000600660000006000000060000000600000000000
-- 038:5556566605060060000600000000000000000000000000000000000000000000
-- 039:4444444113434343143434331343434314343433134343431434343312222222
-- 049:999aaadd00000000000000000000000000000000000000000000000000000000
-- 050:deee777000000000000000000000000000000000000000000000000000000000
-- 064:00008f001f0098f021f0a98f321fba984321cdef567fdef067f0ef007f00f000
-- </TILES>

-- <TILES1>
-- 001:eccccccccc888888caaaaaaaca888888cacccccccacc0ccccacc0ccccacc0ccc
-- 002:ccccceee8888cceeaaaa0cee888a0ceeccca0ccc0cca0c0c0cca0c0c0cca0c0c
-- 003:eccccccccc888888caaaaaaaca888888cacccccccacccccccacccccccac000c0
-- 004:ccccceee8888cceeaaaa0cee888a0ceeccca0cccccca0cc0ccca0cc000ca0c0c
-- 005:2333333312222223122222231222222312222223122222231222222311111112
-- 006:2333233312231223122312231112111223332333122312231223122311121112
-- 007:0000000000040000004c400000043400003cc3000d4c34d00feeeef000ffff00
-- 008:00300000032300000030000000003400000323000d4334d00feeeef000ffff00
-- 009:000000000020040000004c40000c3400002c22000d4234d00feeeef000ffff00
-- 010:000000000010c0000002c200003c3000000430000d4333d00feeeef000ffff00
-- 011:aa99aa99bbaabbaaccbbccbb99cc99ccaa99aa99bbaabbaaccbbccbb99cc99cc
-- 012:ccbbccbb99cc99ccaa99aa99bbaabbaaccbbccbb99cc99ccaa99aa99bbaabbaa
-- 013:aa99aa99bbaabbaaccbbccbb99cc99ccaa99aa99bbaabbaaccbbccbb99cc99cc
-- 014:ccbbccbb99cc99ccaa99aa99bbaabbaaccbbccbb99cc99ccaa99aa99bbaabbaa
-- 017:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 018:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 019:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 020:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 021:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 022:00000000aa00aa00aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 023:0000000088aa88aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 024:000000000c000c000d0c0d0c0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d0d
-- 025:00000000ddddddc000000000dddddc0000000000ddddddc000000000dddddc00
-- 026:000000000cdddddd0000000000cddddd000000000cdddddd0000000000cddddd
-- 032:5000000500444400049949400498484000444400020220200020020050055005
-- 033:111222331112223311122233888bbbcc888bbbcc888bbbcc999aaadd999aaadd
-- 034:344455503444555034445550c0006660c0006660c0006660deee7770deee7770
-- 035:13331333f113f113f113f113fff1fff112221333f112f113f112f113fff1fff1
-- 037:6555606505050660060056000600660000006000000060000000600000000000
-- 038:5556566605060060000600000000000000000000000000000000000000000000
-- 039:4444444113434343143434331343434314343433134343431434343312222222
-- 049:999aaadd00000000000000000000000000000000000000000000000000000000
-- 050:deee777000000000000000000000000000000000000000000000000000000000
-- 064:00008f001f0098f021f0a98f321fba984321cdef567fdef067f0ef007f00f000
-- </TILES1>

-- <TILES2>
-- 001:eccccccccc888888caaaaaaaca888888cacccccccacc0ccccacc0ccccacc0ccc
-- 002:ccccceee8888cceeaaaa0cee888a0ceeccca0ccc0cca0c0c0cca0c0c0cca0c0c
-- 003:eccccccccc888888caaaaaaaca888888cacccccccacccccccacccccccac000c0
-- 004:ccccceee8888cceeaaaa0cee888a0ceeccca0cccccca0cc0ccca0cc000ca0c0c
-- 005:2333333312222223122222231222222312222223122222231222222311111112
-- 006:2333233312231223122312231112111223332333122312231223122311121112
-- 007:0000000000040000004c400000043400003cc3000d4c34d00feeeef000ffff00
-- 008:00300000032300000030000000003400000323000d4334d00feeeef000ffff00
-- 009:000000000020040000004c40000c3400002c22000d4234d00feeeef000ffff00
-- 010:000000000010c0000002c200003c3000000430000d4333d00feeeef000ffff00
-- 011:aa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99cc
-- 012:cc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aa
-- 013:aa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99cc
-- 014:cc88cc8899cc99ccaa99aa9988aa88aacc88cc8899cc99ccaa99aa9988aa88aa
-- 017:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 018:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 019:cacccccccaaaaaaacaaa0000caaaa222caaaaaaac8888888cc000cccecccccec
-- 020:ccca00ccaaaa0cce0aaa0ceeaaaa0ceeaaaa0cee8888ccee000cceeecccceeee
-- 021:9999999999999999999999999999999999999999999999999999999999999999
-- 022:0000000099009900999999999999999999999999999999999999999999999999
-- 023:0000000088998899999999999999999999999999999999999999999999999999
-- 024:000000000c000c000a0c0a0c0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a
-- 025:00000000aaaaaac000000000aaaaac0000000000aaaaaac000000000aaaaac00
-- 026:000000000caaaaaa0000000000caaaaa000000000caaaaaa0000000000caaaaa
-- 032:5000000500444400049949400498484000444400020220200020020050055005
-- 033:111222331112223311122233888bbbcc888bbbcc888bbbcc999aaadd999aaadd
-- 034:344455503444555034445550c0006660c0006660c0006660deee7770deee7770
-- 035:13331333f113f113f113f113fff1fff112221333f112f113f112f113fff1fff1
-- 037:6555606505050660060056000600660000006000000060000000600000000000
-- 038:5556566605060060000600000000000000000000000000000000000000000000
-- 039:4444444113434343143434331343434314343433134343431434343312222222
-- 049:999aaadd00000000000000000000000000000000000000000000000000000000
-- 050:deee777000000000000000000000000000000000000000000000000000000000
-- 064:00008f001f0098f021f0a98f321fba984321cdef567fdef067f0ef007f00f000
-- </TILES2>

-- <MAP>
-- 001:505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:50526262626252526262b0b0526262626262525252626262625252526250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:50000000000000000000b0b0000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:50000000000000000000b0b0000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:50000000000000000000b0b0000000007000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:50000000000000000000b0b0818181818181818181818181818181818150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:50505050505050505050b0b0505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:50606060606000606060b0b0606060606000606060606060000060600050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:50606000606000606060b0b0606060600000606000600060000060600050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:50606060606000006060b0b0606000600000006060000060000060600050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:50600000606000006060b0b0600000000000006060000060000060000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:50000000000000000060b0b0000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:506161616161616161616161616161616161616161616161616161616150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:505151515151515151515151515151515151515151515151515151515150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:505151515151515151515151515151515151515151515151515151515150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:505050505050505050505050505050505050505050505050505050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:1a1c2c7e2553ff003dffa300ffec2700e4360087511d2b5383769c29adfac2c3c7ffccaafff1e8ff77a8ab52365f574f
-- </PALETTE>

-- <PALETTE1>
-- 000:1a1c2c5d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE1>

-- <PALETTE2>
-- 000:1a1c2c7e2553ff003dffa300ffec2700e4360087511d2b5383769c29adfac2c3c7ffccaafff1e8ff77a8ab52365f574f
-- </PALETTE2>

