// title:  hello world v2
// author: lqdev97

// script: js

var t=0; // Frames since start

var TEXT_X=65; // \ Big text
var TEXT_Y=50; // / position

var PARTICLES=[]; // Particle array

function TIC(){
 if(t==0){ // Play music at the beginning
	  music(0);
	}
 t++;
 cls(0); // Clear screen
	map(0,0);
	for(i=7;i>=0;i--){ // Draw large text sprites (Look F2)
	 for(j=0;j<6;j++){
		 spr(1+i*16+j,TEXT_X+j*18,TEXT_Y+Math.sin(t/10+j+i/-6)*8,0,2);
		}
	}
	// Rainbow text drawing (Check the function below)
	RAINBOWTXT("Happy Birthday!",69,80);
	RAINBOWTXT("Have a great day Annelise!!",44,88);
	RAINBOWTXT("-Jack",111,110);
	HANDLEPARTICLES(); // See below for full code
}

function HANDLEPARTICLES(){
 if(btnp(2)){ // Creating particles
	 for(i=0;i<6;i++){
		 // Create particle with random position
	  var _X=55+Math.floor(Math.random()*10);
		 var _Y=60+Math.floor(Math.random()*10);
	  var _S=3+Math.random()*2;
			CREATEPARTICLE(_X,_Y,_S,"l");
		}
	}
	if(btnp(3)){ // Same here
	 for(i=0;i<6;i++){
		 var _X=185+Math.floor(Math.random()*10);
			var _Y=60+Math.floor(Math.random()*10);
	  var _S=3+Math.random()*2;
			CREATEPARTICLE(_X,_Y,_S,"r");
		}
	}
	for(i=0;i<PARTICLES.length;i++){ // For each particle in PARTICLES
	 // Get particle properties
	 var _X=PARTICLES[i].x;
		var _Y=PARTICLES[i].y;
		var _SPD=PARTICLES[i].speed;
		var _DIR=PARTICLES[i].dir;
		// Particle physics
		switch(_DIR){
		 case "l":
			PARTICLES[i].x-=_SPD;
			PARTICLES[i].speed-=0.1;
			break;
			case "r":
			PARTICLES[i].x+=_SPD;
			PARTICLES[i].speed-=0.1;
			break;
		}
		// Draw particle
		pix(_X,_Y,15);
	}
	// Prevent lag by removing excess particles
	for(i=PARTICLES.length-1;i>=0;i--){
	 if(PARTICLES[i].speed<0){
		 PARTICLES.splice(i,1)
		}else{}
	}
}

function CREATEPARTICLE(X,Y,SPD,DIR){
 var _O=new Object();
	_O.x=X;
	_O.y=Y;
	_O.speed=SPD;
	_O.dir=DIR;
	PARTICLES.push(_O);
}

function RAINBOWTXT(TEXT,X,Y){
 var _rt=t/4; // Slower measurement of frames (every 4 frames)
	
	for (i=0;i<TEXT.length;i++){
	 var _c=TORAINBOW(_rt-i+TEXT.length); // Convert time to palette colors and offset rainbow by character
	 print(TEXT.charAt(i),X+i*6+1,Y+1,_c); // Rainbow "shadow"
	 print(TEXT.charAt(i),X+i*6,Y,15); // White foreground
	}
}

function TORAINBOW(I){ // Converts 0-6 to palette indexes
 var _r;
	switch(Math.floor(I%6)){
	 case 0:_r=6;break;
		case 1:_r=9;break;
		case 2:_r=14;break;
		case 3:_r=11;break;
		case 4:_r=13;break;
		case 5:_r=1;break;
	}
	return _r;
}

-- <TILES>
-- 001:ffffffffffffffffff0000ffff0000ffffffffffffffffffff0000ffff0000ff
-- 002:ff0000fffffff0fffffff0ffff0ff0ffff0ff0ffff0fffffff0fffffff0000ff
-- 003:ff0000fffffff0fffffff0ffff0ff0ffff0ff0ffff0fffffff0fffffff0000ff
-- 004:ffffffffffffffffff0000ffff0000ffffffffffffffffffff0000ffff0000ff
-- 005:000ff000000ff000000ff000000ff000000ff00000000000000ff000000ff000
-- 006:fff00fffffffffffffffffffffffffffffffffff0ffffff000ffff00000ff000
-- 016:0000000000000000000000000006600000066000000000000000000000000000
-- 017:6666666666666666660000666600006666666666666666666600006666000066
-- 018:6600006666666066666660666606606666066066660666666606666666000066
-- 019:6600006666666066666660666606606666066066660666666606666666000066
-- 020:6666666666666666660000666600006666666666666666666600006666000066
-- 021:0006600000066000000660000006600000066000000000000006600000066000
-- 022:6660066666666666666666666666666666666666066666600066660000066000
-- 032:0000000000000000000000000009900000099000000000000000000000000000
-- 033:9999999999999999990000999900009999999999999999999900009999000099
-- 034:9900009999999099999990999909909999099099990999999909999999000099
-- 035:9900009999999099999990999909909999099099990999999909999999000099
-- 036:9999999999999999990000999900009999999999999999999900009999000099
-- 037:0009900000099000000990000009900000099000000000000009900000099000
-- 038:9990099999999999999999999999999999999999099999900099990000099000
-- 048:000000000000000000000000000ee000000ee000000000000000000000000000
-- 049:eeeeeeeeeeeeeeeeee0000eeee0000eeeeeeeeeeeeeeeeeeee0000eeee0000ee
-- 050:ee0000eeeeeee0eeeeeee0eeee0ee0eeee0ee0eeee0eeeeeee0eeeeeee0000ee
-- 051:ee0000eeeeeee0eeeeeee0eeee0ee0eeee0ee0eeee0eeeeeee0eeeeeee0000ee
-- 052:eeeeeeeeeeeeeeeeee0000eeee0000eeeeeeeeeeeeeeeeeeee0000eeee0000ee
-- 053:000ee000000ee000000ee000000ee000000ee00000000000000ee000000ee000
-- 054:eee00eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0eeeeee000eeee00000ee000
-- 064:000000000000000000000000000bb000000bb000000000000000000000000000
-- 065:bbbbbbbbbbbbbbbbbb0000bbbb0000bbbbbbbbbbbbbbbbbbbb0000bbbb0000bb
-- 066:bb0000bbbbbbb0bbbbbbb0bbbb0bb0bbbb0bb0bbbb0bbbbbbb0bbbbbbb0000bb
-- 067:bb0000bbbbbbb0bbbbbbb0bbbb0bb0bbbb0bb0bbbb0bbbbbbb0bbbbbbb0000bb
-- 068:bbbbbbbbbbbbbbbbbb0000bbbb0000bbbbbbbbbbbbbbbbbbbb0000bbbb0000bb
-- 069:000bb000000bb000000bb000000bb000000bb00000000000000bb000000bb000
-- 070:bbb00bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0bbbbbb000bbbb00000bb000
-- 080:000000000000000000000000000dd000000dd000000000000000000000000000
-- 081:dddddddddddddddddd0000dddd0000dddddddddddddddddddd0000dddd0000dd
-- 082:dd0000ddddddd0ddddddd0dddd0dd0dddd0dd0dddd0ddddddd0ddddddd0000dd
-- 083:dd0000ddddddd0ddddddd0dddd0dd0dddd0dd0dddd0ddddddd0ddddddd0000dd
-- 084:dddddddddddddddddd0000dddd0000dddddddddddddddddddd0000dddd0000dd
-- 085:000dd000000dd000000dd000000dd000000dd00000000000000dd000000dd000
-- 086:ddd00ddddddddddddddddddddddddddddddddddd0dddddd000dddd00000dd000
-- 096:0000000000000000000000000007700000077000000000000000000000000000
-- 097:7777777777777777770000777700007777777777777777777700007777000077
-- 098:7700007777777077777770777707707777077077770777777707777777000077
-- 099:7700007777777077777770777707707777077077770777777707777777000077
-- 100:7777777777777777770000777700007777777777777777777700007777000077
-- 101:0007700000077000000770000007700000077000000000000007700000077000
-- 102:7770077777777777777777777777777777777777077777700077770000077000
-- 144:0000000000000000000000000000000000066660066000090000000900000009
-- 145:0000000000000000000099660000909066609009990900000099900090009000
-- 146:0000000906666000600000000000000090000000099000000990000006666606
-- 147:0000000000000000000000000000000000000000000000000000000006000000
-- 148:0000000000000000000000000000000000000000000000000000000000000070
-- 149:d00000000007777000000007000000000000000000000ddd00000ddd7077777d
-- 150:000000000000000077dd00000dddd00000000777d000d0dddd000ddddd000ddd
-- 151:0000000000000000000000000000000007777000d0000770d0000000d0000000
-- 160:9000000000000000000000000000000000000000000000000000006600000600
-- 161:9999009009999600090900600990000606000006660000000000000000000000
-- 162:6000000000000000000000000000000060000000600000000000000006000000
-- 163:0006600000006000000000000000000000009000000000000000000000000000
-- 164:00077000000700000000000000000000000d0000000000000000000000000000
-- 165:0000000700000000000d00000000000000000007000000070000000000000070
-- 166:0d0d000d007dddd00700ddd0700d0dd0700d0070000000770000000000000000
-- 167:0000000d00000000000000000000000000000000000000007700000000700000
-- 176:0000600000060000006000000600000006000000600000006000000000000000
-- 178:0060000000600000000600000000000000060000000660000000600000000600
-- 181:0000070000000700000070000000000000007000000770000007000000700000
-- 183:0007000000007000000007000000007000000070000000070000000700000000
-- 192:0000000000900000000000000000000000000000000000000000000000000000
-- 194:0000000000000060000000600000006000000006000000060000000000000006
-- 197:0000000007000000070000000700000070000000700000000000000070000000
-- 198:000000d000000000000000000000000000000000000000000000000000000000
-- 199:0000000000000d00000000000000000000000000000000000000000000000000
-- 224:00000e0000000ee0000000ee000090000000900000e009900000009000000000
-- 225:0009000000090000000900eee0090ee00e00ee000000e000000009990eee0000
-- 226:000000000000e00b00000000005555500000000000e00000000000bb00000bb0
-- 227:0000b0050000b005bb000b0000000b0000bb00b0bb0b00b0000b000b000b000b
-- 240:000eeeee000000000000099000099900009000090000000000000000000000e0
-- 241:ee00e0000099ee00099000e0900009e0000e090e000009000000009000000000
-- 242:0000b0000000000000000005000000550e000500000055000000000000000000
-- 243:000b000b550b0500500b050000000550000000500000005500e0000000000000
-- </TILES>

-- <MAP>
-- 001:000000000000000000000000000000000000000000000000000049596979000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:09192939000000000000000000000000000000000000000000004a5a6a7a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:0a1a2a3a000000000000000000000000000000000000000000004b5b6b7b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:0b1b2b3b000000000000000000000000000000000000000000004c5c6c7c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:0c1c2c3c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:0e1e00000000000000000000000000000000000000000000000000002e3e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:0f1f00000000000000000000000000000000000000000000000000002f3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:000009192939000000000000000000000000000000000000495969790000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:00000a1a2a3a0000000000000000000000000000000000004a5a6a7a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:00000b1b2b3b0000000000000000000000000000000000004b5b6b7b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:00000c1c2c3c0000000000000000000000000000000000004c5c6c7c2e3e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:000000000000000000000000000000000000000000000000000000002f3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:000e1e000009192939000000000000000000000000004959697900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:000f1f00000a1a2a3a000000000000000000000000004a5a6a7a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:00000000000b1b2b3b000000000000000000000000004b5b6b7b002e3e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:00000000000c1c2c3c000000000000000000000000004c5c6c7c002f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:0000007e25531d2b535f574fab5236008751ff004d83769cff77a8ffa300c2c3c700e756ffccaa29adfffff024fff1e8
-- </PALETTE>

