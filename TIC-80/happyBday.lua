// title:  Happy B-day!
// author: lqdev97

// script: js

//Change sprite colors, Change text,
//change particle color, change TORAINBOW
//change main bottom text

var t=0; // Frames since start

var TEXT_X=65; // \ Big text
var TEXT_Y=50; // / position

var PARTICLES=[]; // Particle array

function TIC(){
 if(t==0){ // Play music at the beginning
	  music(0);
	}
 t++;
 cls(0); // Clear screen
	map(0,0);
	for(i=7;i>=0;i--){ // Draw large text sprites (Look F2)
	 for(j=0;j<6;j++){
		 spr(1+i*16+j,TEXT_X+j*18,TEXT_Y+Math.sin(t/10+j+i/-6)*8,0,2);
		}
	}
	// Rainbow text drawing (Check the function below)
	RAINBOWTXT("Happy Mother's Day!",60,80);
	RAINBOWTXT("Have a great day Mom!!",52,88);
	RAINBOWTXT("-Jack",111,110);
	HANDLEPARTICLES(); // See below for full code
}

function HANDLEPARTICLES(){
 if(btnp(2)){ // Creating particles
	 for(i=0;i<6;i++){
		 // Create particle with random position
	  var _X=55+Math.floor(Math.random()*10);
		 var _Y=60+Math.floor(Math.random()*10);
	  var _S=3+Math.random()*2;
			CREATEPARTICLE(_X,_Y,_S,"l");
		}
	}
	if(btnp(3)){ // Same here
	 for(i=0;i<6;i++){
		 var _X=185+Math.floor(Math.random()*10);
			var _Y=60+Math.floor(Math.random()*10);
	  var _S=3+Math.random()*2;
			CREATEPARTICLE(_X,_Y,_S,"r");
		}
	}
	for(i=0;i<PARTICLES.length;i++){ // For each particle in PARTICLES
	 // Get particle properties
	 var _X=PARTICLES[i].x;
		var _Y=PARTICLES[i].y;
		var _SPD=PARTICLES[i].speed;
		var _DIR=PARTICLES[i].dir;
		// Particle physics
		switch(_DIR){
		 case "l":
			PARTICLES[i].x-=_SPD;
			PARTICLES[i].speed-=0.1;
			break;
			case "r":
			PARTICLES[i].x+=_SPD;
			PARTICLES[i].speed-=0.1;
			break;
		}
		// Draw particle
		pix(_X,_Y,8); //Particle color
	}
	// Prevent lag by removing excess particles
	for(i=PARTICLES.length-1;i>=0;i--){
	 if(PARTICLES[i].speed<0){
		 PARTICLES.splice(i,1)
		}else{}
	}
}

function CREATEPARTICLE(X,Y,SPD,DIR){
 var _O=new Object();
	_O.x=X;
	_O.y=Y;
	_O.speed=SPD;
	_O.dir=DIR;
	PARTICLES.push(_O);
}

function RAINBOWTXT(TEXT,X,Y){
 var _rt=t/4; // Slower measurement of frames (every 4 frames)
	
	for (i=0;i<TEXT.length;i++){
	 var _c=TORAINBOW(_rt-i+TEXT.length); // Convert time to palette colors and offset rainbow by character
	 print(TEXT.charAt(i),X+i*6+1,Y+1,_c); // Rainbow "shadow"
	 print(TEXT.charAt(i),X+i*6,Y,15); // White foreground
	}
}

function TORAINBOW(I){ // Converts 0-6 to palette indexes
 var _r;
	switch(Math.floor(I%6)){
	 case 0:_r=12;break; // _r=XX is color value
		case 1:_r=8;break;
		case 2:_r=7;break;
		case 3:_r=6;break;
		case 4:_r=1;break;
		case 5:_r=2;break;
	}
	return _r;
}

-- <TILES>
-- 001:fff00fffffffffffffffffffffffffffffffffff0ffffff000ffff00000ff000
-- 002:ffffffffffffffffff0ff0ffff0ff0ffff0ff0ffff0000ffff0000ffff0000ff
-- 003:ffffffffffffffffff0000ffff0000ffff0000ffff0000ffffffffffffffffff
-- 004:ffffffffffffffffff0ff0ffff0ff0ffff0ff0ffff0000ffff0000ffff0000ff
-- 005:fff00fffffffffffffffffffffffffffffffffff0ffffff000ffff00000ff000
-- 016:0000000000000000000000000006600000066000000000000000000000000000
-- 017:ccc00ccccccccccccccccccccccccccccccccccc0cccccc000cccc00000cc000
-- 018:cccccccccccccccccc0cc0cccc0cc0cccc0cc0cccc0000cccc0000cccc0000cc
-- 019:cccccccccccccccccc0000cccc0000cccc0000cccc0000cccccccccccccccccc
-- 020:cccccccccccccccccc0cc0cccc0cc0cccc0cc0cccc0000cccc0000cccc0000cc
-- 021:ccc00ccccccccccccccccccccccccccccccccccc0cccccc000cccc00000cc000
-- 023:000000000000000000000000000cc000000cc000000000000000000000000000
-- 032:0000000000000000000000000009900000099000000000000000000000000000
-- 033:8880088888888888888888888888888888888888088888800088880000088000
-- 034:8888888888888888880880888808808888088088880000888800008888000088
-- 035:8888888888888888880000888800008888000088880000888888888888888888
-- 036:8888888888888888880880888808808888088088880000888800008888000088
-- 037:8880088888888888888888888888888888888888088888800088880000088000
-- 039:0000000000000000000000000008800000088000000000000000000000000000
-- 048:000000000000000000000000000ee000000ee000000000000000000000000000
-- 049:7770077777777777777777777777777777777777077777700077770000077000
-- 050:7777777777777777770770777707707777077077770000777700007777000077
-- 051:7777777777777777770000777700007777000077770000777777777777777777
-- 052:7777777777777777770770777707707777077077770000777700007777000077
-- 053:7770077777777777777777777777777777777777077777700077770000077000
-- 055:0000000000000000000000000007700000077000000000000000000000000000
-- 064:000000000000000000000000000bb000000bb000000000000000000000000000
-- 065:6660066666666666666666666666666666666666066666600066660000066000
-- 066:6666666666666666660660666606606666066066660000666600006666000066
-- 067:6666666666666666660000666600006666000066660000666666666666666666
-- 068:6666666666666666660660666606606666066066660000666600006666000066
-- 069:6660066666666666666666666666666666666666066666600066660000066000
-- 071:0000000000000000000000000006600000066000000000000000000000000000
-- 080:000000000000000000000000000dd000000dd000000000000000000000000000
-- 081:1110011111111111111111111111111111111111011111100011110000011000
-- 082:1111111111111111110110111101101111011011110000111100001111000011
-- 083:1111111111111111110000111100001111000011110000111111111111111111
-- 084:1111111111111111110110111101101111011011110000111100001111000011
-- 085:1110011111111111111111111111111111111111011111100011110000011000
-- 087:0000000000000000000000000001100000011000000000000000000000000000
-- 096:0000000000000000000000000007700000077000000000000000000000000000
-- 097:2220022222222222222222222222222222222222022222200022220000022000
-- 098:2222222222222222220220222202202222022022220000222200002222000022
-- 099:2222222222222222220000222200002222000022220000222222222222222222
-- 100:2222222222222222220220222202202222022022220000222200002222000022
-- 101:2220022222222222222222222222222222222222022222200022220000022000
-- 103:0000000000000000000000000002200000022000000000000000000000000000
-- 144:0000000000000000000000000000000000066660066000080000000800000008
-- 145:0000000000000000000088660000808066608008880800000088800080008000
-- 146:0000000806666000600000000000000080000000088000000880000006666606
-- 147:0000000000000000000000000000000000000000000000000000000006000000
-- 148:0000000000000000000000000000000000000000000000000000000000000070
-- 149:1000000000077770000000070000000000000000000001110000011170777771
-- 150:0000000000000000771100000111100000000777100010111100011111000111
-- 151:0000000000000000000000000000000007777000100007701000000010000000
-- 160:8000000000000000000000000000000000000000000000000000006600000600
-- 161:8888008008888600080800600880000606000006660000000000000000000000
-- 162:6000000000000000000000000000000060000000600000000000000006000000
-- 163:0006600000006000000000000000000000008000000000000000000000000000
-- 164:0007700000070000000000000000000000010000000000000000000000000000
-- 165:0000000700000000000100000000000000000007000000070000000000000070
-- 166:0101000100711110070011107001011070010070000000770000000000000000
-- 167:0000000100000000000000000000000000000000000000007700000000700000
-- 176:0000600000060000006000000600000006000000600000006000000000000000
-- 178:0060000000600000000600000000000000060000000660000000600000000600
-- 181:0000070000000700000070000000000000007000000770000007000000700000
-- 183:0007000000007000000007000000007000000070000000070000000700000000
-- 192:0000000000800000000000000000000000000000000000000000000000000000
-- 194:0000000000000060000000600000006000000006000000060000000000000006
-- 197:0000000007000000070000000700000070000000700000000000000070000000
-- 198:0000001000000000000000000000000000000000000000000000000000000000
-- 199:0000000000000100000000000000000000000000000000000000000000000000
-- 224:0000080000000880000000880000700000007000006007700000007000000000
-- 225:0007000000070000000700888007088008008800000080000000077708880000
-- 226:0000000000008006000000000011111000000000008000000000006600000660
-- 227:0000600100006001660006000000060000660060660600600006000600060006
-- 240:0008888800000000000007700007770000700007000000000000000000000060
-- 241:8800800000778800077000807000078000060706000007000000007000000000
-- 242:0000600000000000000000010000001108000100000011000000000000000000
-- 243:0006000611060100100601000000011000000010000000110080000000000000
-- </TILES>

-- <MAP>
-- 001:000000000000000000000000000000000000000000000000000049596979000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:09192939000000000000000000000000000000000000000000004a5a6a7a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:0a1a2a3a000000000000000000000000000000000000000000004b5b6b7b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:0b1b2b3b000000000000000000000000000000000000000000004c5c6c7c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:0c1c2c3c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:0e1e00000000000000000000000000000000000000000000000000002e3e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:0f1f00000000000000000000000000000000000000000000000000002f3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:000009192939000000000000000000000000000000000000495969790000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:00000a1a2a3a0000000000000000000000000000000000004a5a6a7a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:00000b1b2b3b0000000000000000000000000000000000004b5b6b7b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:00000c1c2c3c0000000000000000000000000000000000004c5c6c7c2e3e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:000000000000000000000000000000000000000000000000000000002f3f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:000e1e000009192939000000000000000000000000004959697900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:000f1f00000a1a2a3a000000000000000000000000004a5a6a7a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:00000000000b1b2b3b000000000000000000000000004b5b6b7b002e3e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:00000000000c1c2c3c000000000000000000000000004c5c6c7c002f3f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:0000007e25531d2b535f574fab5236008751ff004d83769cff77a8ffa300c2c3c700e756ffccaa29adfffff024fff1e8
-- </PALETTE>

