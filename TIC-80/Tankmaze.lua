-- title:  Tank Maze
-- author: Balistic Ghoul Studios
-- desc:   short description
-- script: lua

DOWN={f=0,r=0}
UP={f=2,r=0}
LEFT={f=0,r=1}
RIGHT={f=0,r=3}

t=0
p={
 x=2*8,
 y=1*8,
	f=DOWN
}

function valueInRange(value, min, max)
 return ((value >= min) and (value <= max))
end
function rect_inter(A,B)
 local xOverlap = 
	 (valueInRange(A.x, B.x, B.x + B.w) or
   valueInRange(B.x, A.x, A.x + A.w))

 local yOverlap = 
	 (valueInRange(A.y, B.y, B.y + B.h) or
   valueInRange(B.y, A.y, A.y + A.h))

 return (xOverlap and yOverlap)
end

function map_solid(x, y)
 return fget(mget(x//8,y//8),0)
end
function map_inter(x, y, w, h)
 return map_solid(x,y) or
	       map_solid(x+w,y) or
								map_solid(x,y+h) or
								map_solid(x+w,y+h)
end

function TIC()
 function move(dx,dy)
	 local nx=p.x+dx
		local ny=p.y+dy
		if not map_inter(nx+3, ny+3, 8, 8) then 
		 p.x=nx
			p.y=ny
		end
 end

	 if btn(0) then move(0,-1) p.f=UP end
	 if btn(1) then move(0,1) p.f=DOWN end
	 if btn(2) then move(-1,0) p.f=LEFT end
	 if btn(3) then move(1,0) p.f=RIGHT end
	
	cls(0)
	map(0,0)
	spr(256+t%60//30*2,p.x,p.y,0,1,p.f.f,p.f.r,2,2)
	t=t+1
end
-- <TILES>
-- 001:1111111111111111111111111111111111111111111111111111111111111111
-- </TILES>

-- <SPRITES>
-- 000:00000000000000000000000000066600000636aa00062888000638aa000628a6
-- 001:00000000000000000000000006660000a636000088260000a8360000a8260000
-- 002:00000000000000000000000000066600000626aa00063888000628aa000638a6
-- 003:00000000000000000000000006660000a626000088360000a8260000a8360000
-- 004:00000000000000000000000000066600000636ff00062ddd00063dff00062df6
-- 005:00000000000000000000000006660000f6360000dd260000fd360000fd260000
-- 006:00000000000000000000000000066600000626ff00063ddd00062dff00063df6
-- 007:00000000000000000000000006660000f6260000dd360000fd260000fd360000
-- 008:00000000000000000000000000066600000636bb00062eee00063ebb00062eb6
-- 009:00000000000000000000000006660000b6360000ee260000be360000be260000
-- 010:00000000000000000000000000066600000626bb00063eee00062ebb00063eb6
-- 011:00000000000000000000000006660000b6260000ee360000be260000be360000
-- 015:0000000000000000000000000004400000044000000000000000000000000000
-- 016:000638aa00062888000636a80006660800000008000000000000000000000000
-- 017:a836000088260000a63600000666000000000000000000000000000000000000
-- 018:000628aa00063888000626a80006660800000008000000000000000000000000
-- 019:a826000088360000a62600000666000000000000000000000000000000000000
-- 020:00063dff00062ddd000636fd0006660d0000000d000000000000000000000000
-- 021:fd360000dd260000f63600000666000000000000000000000000000000000000
-- 022:00062dff00063ddd000626fd0006660d0000000d000000000000000000000000
-- 023:fd260000dd360000f62600000666000000000000000000000000000000000000
-- 024:00063ebb00062eee000636be0006660e0000000e000000000000000000000000
-- 025:be360000ee260000b63600000666000000000000000000000000000000000000
-- 026:00062ebb00063eee000626be0006660e0000000e000000000000000000000000
-- 027:be260000ee360000b62600000666000000000000000000000000000000000000
-- 032:00000000000000000000000800066608000636a800062888000638aa000628a6
-- 033:00000000000000000000000006660000a636000088260000a8360000a8260000
-- 034:00000000000000000000000000066600000636aa00062888000638aa000628a6
-- 035:00000000000000000000000006660000a636000088260000a8360000a8888000
-- 036:00000000000000000000000d0006660d000636fd00062ddd00063dff00062df6
-- 037:00000000000000000000000006660000f6360000dd260000fd360000fd260000
-- 038:00000000000000000000000000066600000636ff00062ddd00063dff00062df6
-- 039:00000000000000000000000006660000f6360000dd260000fd360000fdddd000
-- 040:00000000000000000000000e0006660e000636be00062eee00063ebb00062eb6
-- 041:00000000000000000000000006660000b6360000ee260000be360000be260000
-- 042:00000000000000000000000000066600000636bb00062eee00063ebb00062eb6
-- 043:00000000000000000000000006660000b6360000ee260000be360000beeee000
-- 048:000638aa00062888000636aa0006660000000000000000000000000000000000
-- 049:a836000088260000a63600000666000000000000000000000000000000000000
-- 050:000638aa00062888000636aa0006660000000000000000000000000000000000
-- 051:a836000088260000a63600000666000000000000000000000000000000000000
-- 052:00063dff00062ddd000636ff0006660000000000000000000000000000000000
-- 053:fd360000dd260000f63600000666000000000000000000000000000000000000
-- 054:00063dff00062ddd000636ff0006660000000000000000000000000000000000
-- 055:fd360000dd260000f63600000666000000000000000000000000000000000000
-- 056:00063ebb00062eee000636bb0006660000000000000000000000000000000000
-- 057:be360000ee260000b63600000666000000000000000000000000000000000000
-- 058:00063ebb00062eee000636bb0006660000000000000000000000000000000000
-- 059:be360000ee260000b63600000666000000000000000000000000000000000000
-- 064:00000000000000000000000000066600000636aa00062888000638aa008888a6
-- 065:00000000000000000000000006660000a636000088260000a8360000a8260000
-- 066:00000000000000000000000000066600000626aa00063888000628aa008888a6
-- 067:00000000000000000000000006660000a626000088360000a8260000a8360000
-- 068:00000000000000000000000000066600000636ff00062ddd00063dff00ddddf6
-- 069:00000000000000000000000006660000f6360000dd260000fd360000fd260000
-- 070:00000000000000000000000000066600000626ff00063ddd00062dff00ddddf6
-- 071:00000000000000000000000006660000f6260000dd360000fd260000fd360000
-- 072:00000000000000000000000000066600000636bb00062eee00063ebb00eeeeb6
-- 073:00000000000000000000000006660000b6360000ee260000be360000be260000
-- 074:00000000000000000000000000066600000626bb00063eee00062ebb00eeeeb6
-- 075:00000000000000000000000006660000b6260000ee360000be260000be360000
-- 080:000638aa00062888000636aa0006660000000000000000000000000000000000
-- 081:a836000088260000a63600000666000000000000000000000000000000000000
-- 082:000628aa00063888000626aa0006660000000000000000000000000000000000
-- 083:a826000088360000a62600000666000000000000000000000000000000000000
-- 084:00063dff00062ddd000636ff0006660000000000000000000000000000000000
-- 085:fd360000dd260000f63600000666000000000000000000000000000000000000
-- 086:00062dff00063ddd000626ff0006660000000000000000000000000000000000
-- 087:fd260000dd360000f62600000666000000000000000000000000000000000000
-- 088:00063ebb00062eee000636bb0006660000000000000000000000000000000000
-- 089:be360000ee260000b63600000666000000000000000000000000000000000000
-- 090:00062ebb00063eee000626bb0006660000000000000000000000000000000000
-- 091:be260000ee360000b62600000666000000000000000000000000000000000000
-- 096:00000000000000000000000000066600000626aa00063888000628aa000638a6
-- 097:00000000000000000000000006660000a626000088360000a8260000a8888000
-- 100:00000000000000000000000000066600000626ff00063ddd00062dff00063df6
-- 101:00000000000000000000000006660000f6260000dd360000fd260000fdddd000
-- 104:00000000000000000000000000066600000626bb00063eee00062ebb00063eb6
-- 105:00000000000000000000000006660000b6260000ee360000be260000beeee000
-- 112:000628aa00063888000626aa0006660000000000000000000000000000000000
-- 113:a826000088360000a62600000666000000000000000000000000000000000000
-- 116:00062dff00063ddd000626ff0006660000000000000000000000000000000000
-- 117:fd260000dd360000f62600000666000000000000000000000000000000000000
-- 120:00062ebb00063eee000626bb0006660000000000000000000000000000000000
-- 121:be260000ee360000b62600000666000000000000000000000000000000000000
-- 128:0000000000000000000000000006660000063644000625550006354400062546
-- 129:0000000000000000000000000666000046360000552600004536000045260000
-- 130:0000000000000000000000000006660000062644000635550006254400063546
-- 131:0000000000000000000000000666000046260000553600004526000045360000
-- 144:0006354400062555000636450006660500000005000000000000000000000000
-- 145:4536000055260000463600000666000000000000000000000000000000000000
-- 146:0006254400063555000626450006660500000005000000000000000000000000
-- 147:4526000055360000462600000666000000000000000000000000000000000000
-- 160:0000000000000000000000050006660500063645000625550006354400062546
-- 161:0000000000000000000000000666000046360000552600004536000045260000
-- 162:0000000000000000000000000006660000063644000625550006354400062546
-- 163:0000000000000000000000000666000046360000552600004536000045555000
-- 176:0006354400062555000636440006660000000000000000000000000000000000
-- 177:4536000055260000463600000666000000000000000000000000000000000000
-- 178:0006354400062555000636440006660000000000000000000000000000000000
-- 179:4536000055260000463600000666000000000000000000000000000000000000
-- 192:0000000000000000000000000006660000063644000625550006354400555546
-- 193:0000000000000000000000000666000046360000552600004536000045260000
-- 194:0000000000000000000000000006660000062644000635550006254400555546
-- 195:0000000000000000000000000666000046260000553600004526000045360000
-- 208:0006354400062555000636440006660000000000000000000000000000000000
-- 209:4536000055260000463600000666000000000000000000000000000000000000
-- 210:0006254400063555000626440006660000000000000000000000000000000000
-- 211:4526000055360000462600000666000000000000000000000000000000000000
-- 224:0000000000000000000000000006660000062644000635550006254400063546
-- 225:0000000000000000000000000666000046260000553600004526000045555000
-- 240:0006254400063555000626440006660000000000000000000000000000000000
-- 241:4526000055360000462600000666000000000000000000000000000000000000
-- </SPRITES>

-- <MAP>
-- 000:001010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:001000001000000000000000000000000000001000001000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:001000001000000000000000000000000000001000001000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:001000001010101000001010101010101000001000001010101000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:001000000000001000001000000000001000001000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:001000000000001000001000000000001000001000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:001010101000001000001010101000001000001010101000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:001000000000001000000000001000000000001000001000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:001000000000001000000000001000000000001000001000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:001000001010101000001000001000001010101000001010101000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:001000001000000000001000001000001000000000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:001000001000000000001000001000001000000000000000001000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:001000001000001010101000001000001000001000001010101000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:001000000000001000000000001000000000001000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:001000000000001000000000001000000000001000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:001010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <FLAGS>
-- 000:00100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </FLAGS>

-- <PALETTE>
-- 000:000000bcb19f847f7f5a5a63cead73a5845a3e3d4c21263f6b7b393a533984ad424063b26c4f40673347394071c0461f
-- </PALETTE>

